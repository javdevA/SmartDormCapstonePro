{% extends "base.html" %}
{% block content %}
<h1>ğŸ  Smart Dorm Allocation System</h1>

<!-- DASHBOARD STATS -->
<div class="dashboard">
    <div class="stat-card">
        <h2>{{ students|length }}</h2>
        <p>Total Students</p>
    </div>
    <div class="stat-card">
        <h2>{{ dorms|length }}</h2>
        <p>Total Dorms</p>
    </div>
    <div class="stat-card">
        <h2>{{ total_capacity }}</h2>
        <p>Total Capacity</p>
    </div>
    <div class="stat-card {% if students|length > total_capacity %}warning{% endif %}">
        <h2>{{ students|length - total_capacity if students|length > total_capacity else 0 }}</h2>
        <p>Capacity Overflow</p>
    </div>
</div>

<!-- ADMIN QUICK ACTIONS (Only visible when logged in) -->
{% if is_admin %}
<h2>ğŸ‘‘ Admin Quick Actions</h2>
<div class="quick-actions">
    <form method="post" action="{{ url_for('load_sample') }}" style="display:inline;">
        <button type="submit" class="btn-primary">ğŸ’¾ Generate Sample Data</button>
    </form>
    <a href="{{ url_for('compare_strategies') }}" class="btn-primary">ğŸ“Š Compare Strategies</a>
    <a href="{{ url_for('run_allocation') }}" class="btn-primary">ğŸš€ Run Allocation</a>
    <a href="{{ url_for('admin_logs') }}" class="btn-secondary">ğŸ“‹ View Logs</a>
</div>

<!-- RECENT ACTIVITY (Only for admin) -->
<h3>ğŸ“ˆ Recent Activity</h3>
<div class="activity">
    <p><strong>Total allocations run:</strong> Check logs</p>
    <p><strong>Students added today:</strong> {{ students|length }}</p>
    <p><strong>System ready for allocation!</strong></p>
</div>
{% else %}
<!-- PUBLIC VIEW (No login) -->
<div style="background: #fff3cd; padding: 20px; border-radius: 8px; border-left: 4px solid #ffc107;">
    <h3>ğŸ”’ Admin Login Required</h3>
    <p>Login as <strong>admin</strong> / <strong>password123</strong> to access:</p>
    <ul>
        <li>Student & dorm management</li>
        <li>Allocation algorithms</li>
        <li>Strategy comparison</li>
        <li>Data import/export</li>
        <li>Audit logs</li>
    </ul>
    <a href="{{ url_for('login') }}" class="btn-primary">ğŸ” Admin Login</a>
</div>
{% endif %}
{% endblock %}
