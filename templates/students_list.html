{% extends "base.html" %}
{% block content %}
<h2>Students</h2>
<a href="{{ url_for('add_student') }}">Add new student</a>
<table>
    <tr>
        <th>ID</th><th>Name</th><th>Year</th><th>Priority</th><th>Preferred Dorms</th><th>Tags</th><th>Actions</th>
    </tr>
    {% for s in students %}
    <tr>
        <td>{{ s.student_id }}</td>
        <td>{{ s.name }}</td>
        <td>{{ s.year }}</td>
        <td>{{ s.priority }}</td>
        <td>{{ s.preferred_dorms }}</td>
        <td>{{ s.tags }}</td>
        <td>
            <!-- Edit link must use 'edit_student' and student_id parameter -->
            <a href="{{ url_for('edit_student', student_id=s.student_id) }}">Edit</a>
            <!-- Delete must be POST and action must match route -->
            <form action="{{ url_for('delete_student', student_id=s.student_id) }}"
                  method="post" style="display:inline;">
                <button type="submit" onclick="return confirm('Delete student?');">
                    Delete
                </button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
