{% extends "base.html" %}
{% block content %}
<div style="max-width: 800px; margin: 0 auto; padding: 2rem;">
    <h1 style="text-align: center;">ğŸ”§ Student Maintenance</h1>
    
    <div class="chart-container" style="margin-bottom: 2rem;">
        <form method="post">
            <div style="margin-bottom: 1.5rem;">
                <label style="font-weight: 600; display: block; margin-bottom: 0.5rem;">Issue Description:</label>
                <textarea name="issue" style="width: 100%; padding: 1rem; border: 2px solid rgba(0,0,0,0.1); border-radius: 12px; font-size: 1rem; min-height: 120px;" placeholder="Describe your maintenance issue..." required></textarea>
            </div>
            <button type="submit" class="btn-primary" style="width: 100%;">Submit Ticket</button>
        </form>
    </div>
    
    {% if tickets %}
    <h3>Your Recent Tickets</h3>
    <table>
        <tr><th>ID</th><th>Room</th><th>Issue</th><th>Reported</th><th>Status</th></tr>
        {% for ticket in tickets[-5:] %}
        <tr>
            <td>{{ ticket.id }}</td>
            <td>{{ ticket.room }}</td>
            <td>{{ ticket.issue[:50] }}...</td>
            <td>{{ ticket.reported }}</td>
            <td><span class="status-{{ ticket.status|lower }}">{{ ticket.status }}</span></td>
        </tr>
        {% endfor %}
    </table>
    {% endif %}
    
    <a href="{{ url_for('student_dashboard') }}" class="btn-primary" style="margin-top: 2rem; display: inline-block;">â† Dashboard</a>
</div>
{% endblock %}
